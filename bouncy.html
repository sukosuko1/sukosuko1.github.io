<!doctype html>
<html>
    
<head>
<meta name="viewport" content="width=100px, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<meta name="apple-mobile-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> 
<meta name="apple-mobile-web-app-title" content="Mumble App">
<meta name="HandheldFriendly" content="true">
    
    <style>
        body {
            width:375;
            height:667;
        }
        .moveable {
            position: absolute;
            background-color: aquamarine;
            background-image: linear-gradient(45deg,#AAF,#88C);
            padding: 10px 10px;
            box-shadow: 8px 8px 5px #CCC;
            z-index 9;
        }
        .textpop {
            position: absolute;
            top:100px;
        }
        
        #tag2 {
             position: absolute;
            top:100px;
            left:300px;
            width: 180px;
            height: 180px;
        }
        image {
             position: absolute;
            padding: 0px;
        }
        #minion1 {
             position: absolute;
            transform: scale(0.7);
            padding: 0px;
        }
        #minion2 {
             position: absolute;
            top:450px;
            left:200px;
        }
        #player {
            position: absolute;
            z-index -1;
        }
        #player2 {
            position: absolute;
            z-index -1;
            top: 600px;
        }
        #c1 {
            width: 300px;
            height: 300px;
        }
    </style>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
    
<body id="body">
    <button id="b1" onclick="buttonclick()">button</button>
    <div id="debug1">info</div>
    <div class="moveable" id="tag1">Hi there!</div>
    <div class="moveable" id="tag2">Can't touchstart this
       <image id="minion1" src="http://i.giphy.com/10ca1VbQzmsokE.gif"/>
    </div>
   <image id="minion2" src="http://i.giphy.com/10ca1VbQzmsokE.gif"/>
    
    <canvas id="c1"></canvas>
    <p id="mapholder">map</p>
    
</body>
    
    

<script>
        
function addObject(text, x, y) {
//   $("body").after('<div class="textpop" style="top:100px;left:150px">hello</div>');
    

    
   $("body").after('<div id="t1" class="textpop" style="top:' + (y-10) + 'px;left:' + (x-20) + 'px">hello</div>');
   $("#t1").hide()
        .fadeIn(50, function (){} ).delay(900)
        .effect( "puff", {percent:200}, 200, function(e) { 
       console.log("done");  
       $("#t1").remove();
    });
}



function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;

    var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false&key=YOUR_:KEY";

    alert(img_url);
    
    document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
}
        
$(document).ready(function(){
    
    document.body.addEventListener('touchmove', function(event) {
    event.preventDefault();
    }, false); 

    document.ontouchmove = function(event){
    event.preventDefault();
    
    getLocation();
    
}
    
 var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};

function success(pos) {
  var crd = pos.coords;

  console.log('Your current position is:');
  console.log(`Latitude : ${crd.latitude}`);
  console.log(`Longitude: ${crd.longitude}`);
  console.log(`More or less ${crd.accuracy} meters.`);
  alert(`Latitude : ${crd.latitude}` + `More or less ${crd.accuracy} meters.` );
};

function error(err) {
  console.warn(`ERROR(${err.code}): ${err.message}`);
};

navigator.geolocation.getCurrentPosition(success, error, options);

    
var audio = new Audio('./phaser.wav');
var audio2 = new Audio('./bloop_x.wav');
    

    // Setup canvas and expose context via ctx variable
    document.addEventListener('touchstart', function(event) {
        event.preventDefault();
        if ( event.touches[0].pageY < 300) {
            $(".moveable").css("background-color", "blue");
        } else {
            $(".moveable").css("background-color", "brown");
        }
    
        addObject("hello!", event.touches[0].pageX, event.touches[0].pageY);
        var c = document.getElementById("c1");
        var ctx = c.getContext("2d");    
  for (var i = 0; i < event.touches.length; i++) {
    var touch = event.touches[i];
    ctx.beginPath();
    ctx.arc(touch.pageX, touch.pageY, 30, 0, 2*Math.PI, true);
    ctx.fill();
    ctx.stroke();
  }
    
    }, false);    
    
    

var obj = document.getElementById('tag2');
obj.addEventListener('touchmove', function(event) {
  // If there's exactly one finger inside this element
//audio.play();    
  if (event.targetTouches.length == 1) {
    var touch = event.targetTouches[0];
    // Place element where the finger is
    obj.style.left = (touch.pageX - 80)  + 'px';
    obj.style.top = ( touch.pageY - 80) + 'px';
  }
            var c = document.getElementById("c1");
        var ctx = c.getContext("2d");    

  for (var i = 0; i < event.touches.length; i++) {
    var touch = event.touches[i];
    ctx.beginPath();
    ctx.arc(touch.pageX, touch.pageY, 30, 0, 2*Math.PI, true);
    ctx.fill();
    ctx.stroke();
  }
}, false);
    
    
    
var w = window.innerWidth
|| document.documentElement.clientWidth
|| document.body.clientWidth;
    
var h = window.innerHeight
|| document.documentElement.clientHeight
|| document.body.clientHeight;
    
    
    console.log( "sc=" + screen.width + "," + screen.height + "  " + w + "," + h);
    
    $("#debug1").text( "1.8 sc=" + screen.width + "," + screen.height + " dc=" + w + "," + h + " sa="+ window.navigator.standalone);
    
    window.navigator.standalone = true;
    
    $("#debug1").css("color","red");
    
    
    
    $("div").mousedown(function(){
        addObject("div", 100, 100);
    });
    
    $(document).mousedown(function(e){
//        audio.play();    
        addObject("hello!", e.pageX, e.pageY);
    });
    
    /*
    $(document).on("tap",(function(e){
        addObject("hello!", e.pageX, e.pageY);
    }));
    */
    
    
});
    
</script>
    
    
    
    
    
    
</html>

