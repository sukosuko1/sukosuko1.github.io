<!DOCTYPE html>
<html>
<head>
<title>pixi.js example 1</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #440022;
		}
		.embed-video { position:relative; z-index:-1;  }
		.coverCanvas { position:relative; z-index:3; opacity:0.7; width:100%; height:100%; }
		
	</style>

<script src="pixi.min.js"></script>
</head>

<body>
<div id="outerbox">
  <iframe id="youtubeplayer" class="embed-video" width="428" height="390" value="transparent" enablejsapi="true" 
        frameborder="0"
        style="border: solid 4px #37474F"
        src="https://www.youtube.com/embed/M3IWsWzSo14?wmode=opaque?autoplay=1&loop=1?controls=1?enablejsapi=1">
  </iframe>
  <canvas id="myCanvas" class="coverCanvas" value="transparent"></canvas>
  </div>
  
  <script>  
  console.log("text1");
  console.log(PIXI); 
//  window.alert(PIXI);

  var gameCanvas = document.getElementById("myCanvas");
   gameWidth = window.innerWidth;
   gameHeight = window.innerHeight;  
   
var rendererOptions = {
    view:gameCanvas,
    antialiasing:false,
    transparent:true,
    resolution:1
}  
//  var renderer = PIXI.autoDetectRenderer(gameWidth, gameHeight, gameCanvas, true);
  var renderer = PIXI.autoDetectRenderer(gameWidth, gameHeight, rendererOptions);
  document.body.appendChild(renderer.view);
 
  var stage = new PIXI.Container();
  var bunny = 0;
  var bunny2 = 0;

  PIXI.loader.add('Inever2','Inever2.png').load(function(loader,resources) {

    // create some white text using the Snippet webfont

	bunny = new PIXI.Sprite(resources.Inever2.texture);
	bunny.anchor.x = 0.5;
	bunny.anchor.y = 0.5;
	bunny.position.x = 120;
	bunny.position.y = 300;
        bunny.scale.x = 0.4;
        bunny.scale.y = 0.4;
	stage.addChild(bunny);

	bunny2 = new PIXI.Sprite(resources.Inever2.texture);
	bunny2.anchor.x = 0.5;
	bunny2.anchor.y = 0.5;
	bunny2.position.x = 250;
	bunny2.position.y = 500;
        bunny2.scale.x = 0.1;
        bunny2.scale.y = 0.2;
	stage.addChild(bunny2);

	bunny3 = new PIXI.Sprite(resources.Inever2.texture);
	bunny3.anchor.x = 0.8;
	bunny3.anchor.y = 0.8;
	bunny3.position.x = 400;
	bunny3.position.y = 400;
        bunny3.basex = 400; bunny3.basey=400;
        bunny3.scale.x = 0.2;
        bunny3.scale.y = 0.04;
        bunny3.interactive = true;
        bunny3
         .on('mousedown', onDragStart)
         .on('touchstart', onDragStart)
         .on('mouseup', onDragEnd)
         .on('mouseupoutside', onDragEnd)
         .on('touchend', onDragEnd)
         .on('touchendoutside', onDragEnd)
         .on('mousemove', onDragMove)
          .on('touchmove', onDragMove)

	stage.addChild(bunny3);

	bunny4 = new PIXI.Sprite(resources.Inever2.texture);
	bunny4.anchor.x = 0.8;
	bunny4.anchor.y = 0.8;
	bunny4.position.x = 550;
	bunny4.position.y = 400;
        bunny4.basex = 550; bunny4.basey=400;
        bunny4.scale.x = 0.04;
        bunny4.scale.y = 0.04;
        bunny4.interactive = true;
        bunny4
         .on('mousedown', onDragStart)
         .on('touchstart', onDragStart)
         .on('mouseup', onDragEnd)
         .on('mouseupoutside', onDragEnd)
         .on('touchend', onDragEnd)
         .on('touchendoutside', onDragEnd)
         .on('mousemove', onDragMove)
          .on('touchmove', onDragMove)

	stage.addChild(bunny4);

        var textSample = new PIXI.Text('Pixi.js can has\n multiline text!', { font: '35px Snippet', fill: 'white', align: 'left' });
        textSample.position.set(20);
	stage.addChild(textSample);


	animate();
  });

  function animate() {
 
    requestAnimationFrame( animate );
 
    bunny.rotation += 0.005;
//    bunny2.rotation += -0.02;

    var timer = +new Date;
//    bunny2.tint = Math.cos(timer * 0.01) * 0xFF0000 + Math.cos(timer * 0.01) * 0x00FF00 + Math.cos(timer * 0.01) * 0x0000FF;

//    bunny2.scale.x = 1 + 0.05 * Math.sin(timer * 0.01);
 //   bunny2.scale.y = 1 + 0.02 * Math.sin(timer * 0.01);

    bunny2.alpha =  0.3 + 0.3 * Math.sin(timer * 0.001);

    bunny3.position.x = bunny3.basex;
    bunny3.position.y = bunny3.basey + 40 * Math.cos(timer * 0.01);

    bunny4.position.x = bunny4.basex;
    bunny4.position.y = bunny4.basey + 30 * Math.cos(timer * 0.0066);


    renderer.render(stage);
  }

 function onButtonDown()
 {
    this.isdown = true;
    this.alpha = 0;
    var gameCanvas = document.getElementById("myCanvas");
    gameCanvas.width = 20;
 }
 function onButtonUp()
 {
    this.scale.x *= 1.1;
    this.alpha = 1;
 }

function onDragStart(event)
{
  this.data = event.data;
  this.alpha = 0.5;
  this.dragging = true;
   console.log("dragstrt");
}

function onDragEnd()
{
  this.alpha = 1;
  this.dragging = false;
}

function onDragMove() {
   if (this.dragging) {
     var newPosition = this.data.getLocalPosition(this.parent);
      this.basex = newPosition.x;
      this.basey = newPosition.y;
      console.log(x + "," + y);
  }
}

 // 4. The API will call this function when the video player is ready.
     function onPlayerReady(event) {
       event.target.playVideo();
     }
      
  </script>
  
  <script type="text/javascript">
  var tag = document.createElement('script');
  tag.id = 'iframe-demo';
  tag.src = 'https://www.youtube.com/iframe_api';
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  document.getElementById("t1").innerHTML = "One";
  
  var player;
  function onYouTubeIframeAPIReady() {
  document.getElementById("t1").innerHTML = "two";
    player = new YT.Player('youtubeplayer', {
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
    });
  }
  function onPlayerReady(event) {
  document.getElementById("t1").innerHTML = "three";
    document.getElementById('existing-iframe-example').style.borderColor = '#FF6D00';
     event.target.playVideo();
  document.getElementById("t1").innerHTML = "four";
  }
  function changeBorderColor(playerStatus) {
  document.getElementById("t1").innerHTML = "five";
    var color;
    if (playerStatus == -1) {
      color = "#37474F"; // unstarted = gray
    } else if (playerStatus == 0) {
      color = "#FFFF00"; // ended = yellow
    } else if (playerStatus == 1) {
      color = "#33691E"; // playing = green
    } else if (playerStatus == 2) {
      color = "#DD2C00"; // paused = red
    } else if (playerStatus == 3) {
      color = "#AA00FF"; // buffering = purple
    } else if (playerStatus == 5) {
      color = "#FF6DOO"; // video cued = orange
    }
    if (color) {
      document.getElementById('existing-iframe-example').style.borderColor = color;
    }
  }
  function onPlayerStateChange(event) {
    changeBorderColor(event.data);
  }
</script>

  <h1 id="t1">Hello World</h1>
  <p>Pixitest is hosted with GitHub Pages 2d.</p>

</body>
</html>
